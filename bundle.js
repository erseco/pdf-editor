var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e}function l(t,e,n,o){if(t){const i=c(t,e,n,o);return t[0](i)}}function c(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function u(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}function d(e){return e&&r(e.destroy)?e.destroy:t}const f="undefined"!=typeof window;let h=f?()=>window.performance.now():()=>Date.now(),p=f?t=>requestAnimationFrame(t):t;const g=new Set;function m(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&p(m)}function w(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function E(){return $(" ")}function L(){return $("")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function H(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function z(t){return""===t?void 0:+t}function M(t,e){(null!=e||t.value)&&(t.value=e)}function C(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function S(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function F(t,e,n){t.classList[n?"add":"remove"](e)}function j(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const P=new Set;let T,D=0;function R(t,e,n,o,i,r,a,s=0){const l=16.666/o;let c="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*r(t);c+=100*t+`%{${a(o,1-o)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,f=t.ownerDocument;P.add(f);const h=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(x("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${d} ${o}ms linear ${i}ms 1 both`,D+=1,d}function A(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),D-=i,D||p(()=>{D||(P.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),P.clear())}))}function N(t){T=t}function B(){if(!T)throw new Error("Function called outside component initialization");return T}function W(t){B().$$.on_mount.push(t)}function O(){const t=B();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=j(e,n);o.slice().forEach(e=>{e.call(t,i)})}}}function G(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const U=[],X=[],Y=[],q=[],I=Promise.resolve();let J=!1;function K(t){Y.push(t)}let V=!1;const Q=new Set;function Z(){if(!V){V=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];N(e),tt(e.$$)}for(U.length=0;X.length;)X.pop()();for(let t=0;t<Y.length;t+=1){const e=Y[t];Q.has(e)||(Q.add(e),e())}Y.length=0}while(U.length);for(;q.length;)q.pop()();J=!1,V=!1,Q.clear()}}function tt(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}let et;function nt(t,e,n){t.dispatchEvent(j(`${e?"intro":"outro"}${n}`))}const ot=new Set;let it;function rt(){it={r:0,c:[],p:it}}function at(){it.r||i(it.c),it=it.p}function st(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function lt(t,e,n,o){if(t&&t.o){if(ot.has(t))return;ot.add(t),it.c.push(()=>{ot.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const ct={duration:0};function ut(n,o,a,s){let l=o(n,a),c=s?0:1,u=null,d=null,f=null;function w(){f&&A(n,f)}function y(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:r=0,duration:a=300,easing:s=e,tick:v=t,css:x}=l||ct,b={start:h()+r,b:o};o||(b.group=it,it.r+=1),u?d=b:(x&&(w(),f=R(n,c,o,a,r,s,x)),o&&v(0,1),u=y(b,a),K(()=>nt(n,o,"start")),function(t){let e;0===g.size&&p(m),new Promise(n=>{g.add(e={c:t,f:n})})}(t=>{if(d&&t>d.start&&(u=y(d,a),d=null,nt(n,u.b,"start"),x&&(w(),f=R(n,c,u.b,u.duration,0,s,l.css))),u)if(t>=u.end)v(c=u.b,1-c),nt(n,u.b,"end"),d||(u.b?w():--u.group.r||i(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*s(e/u.duration),v(c,1-c)}return!(!u&&!d)}))}return{run(t){r(l)?(et||(et=Promise.resolve(),et.then(()=>{et=null})),et).then(()=>{l=l(),v(t)}):v(t)},end(){w(),u=d=null}}}function dt(t,e){lt(t,1,1,()=>{e.delete(t.key)})}function ft(t,e,n,o,i,r,a,s,l,c,u,d){let f=t.length,h=r.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,y=new Map;for(p=h;p--;){const t=d(i,r,p),s=n(t);let l=a.get(s);l?o&&l.p(t,e):(l=c(s,t),l.c()),w.set(s,m[p]=l),s in g&&y.set(s,Math.abs(p-g[s]))}const v=new Set,x=new Set;function b(t){st(t,1),t.m(s,u,a.has(t.key)),a.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],o=e.key,i=n.key;e===n?(u=e.first,f--,h--):w.has(i)?!a.has(o)||v.has(o)?b(e):x.has(i)?f--:y.get(o)>y.get(i)?(x.add(o),b(e)):(v.add(i),f--):(l(n,a),f--)}for(;f--;){const e=t[f];w.has(e.key)||l(e,a)}for(;h;)b(m[h-1]);return m}function ht(t){t&&t.c()}function pt(t,e,o){const{fragment:a,on_mount:s,on_destroy:l,after_update:c}=t.$$;a&&a.m(e,o),K(()=>{const e=s.map(n).filter(r);l?l.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(K)}function gt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(t,e){-1===t.$$.dirty[0]&&(U.push(t),J||(J=!0,I.then(Z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function wt(e,n,r,a,s,l,c=[-1]){const u=T;N(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:c};let h=!1;if(f.ctx=r?r(e,d,(t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),h&&mt(e,t)),n}):[],f.update(),h=!0,i(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(v)}else f.fragment&&f.fragment.c();n.intro&&st(e.$$.fragment),pt(e,n.target,n.anchor),Z()}N(u)}class yt{$destroy(){gt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function vt(t){const e=t-1;return e*e*e+1}function xt(t,{delay:e=0,duration:n=400,easing:o=vt,x:i=0,y:r=0,opacity:a=0}){const s=getComputedStyle(t),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*r}px);\n\t\t\topacity: ${l-u*e}`}}class bt extends yt{constructor(t){super(),wt(this,t,null,null,a,{})}}function $t(e){let n,o;return{c(){n=x("div"),o=x("canvas"),H(o,"class","max-w-full"),C(o,"width",e[1]+"px"),H(o,"width",e[1]),H(o,"height",e[2])},m(t,i){y(t,n,i),w(n,o),e[9](o)},p(t,[e]){2&e&&C(o,"width",t[1]+"px"),2&e&&H(o,"width",t[1]),4&e&&H(o,"height",t[2])},i:t,o:t,d(t){t&&v(n),e[9](null)}}}function Et(t,e,n){let{page:o}=e;const i=O();let r,a,s;function l(){i("measure",{scale:r.clientWidth/a})}async function c(){const t=await o,e=r.getContext("2d"),i=t.getViewport({scale:1,rotation:0});n(1,a=i.width),n(2,s=i.height),await t.render({canvasContext:e,viewport:i}).promise,l(),window.addEventListener("resize",l)}var u;return W(c),u=()=>{window.removeEventListener("resize",l)},B().$$.on_destroy.push(u),t.$set=t=>{"page"in t&&n(3,o=t.page)},[r,a,s,o,i,void 0,void 0,l,c,function(t){X[t?"unshift":"push"](()=>{n(0,r=t)})}]}class Lt extends yt{constructor(t){super(),wt(this,t,Et,$t,a,{page:3})}}function _t(t){let e,n;function o(o){e=o.clientX,n=o.clientY;const a=o.target;t.dispatchEvent(new CustomEvent("panstart",{detail:{x:e,y:n,target:a}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",r)}function i(o){const i=o.clientX-e,r=o.clientY-n;e=o.clientX,n=o.clientY,t.dispatchEvent(new CustomEvent("panmove",{detail:{x:e,y:n,dx:i,dy:r}}))}function r(o){e=o.clientX,n=o.clientY,t.dispatchEvent(new CustomEvent("panend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r)}function a(o){if(o.touches.length>1)return;const i=o.touches[0];e=i.clientX,n=i.clientY;const r=i.target;t.dispatchEvent(new CustomEvent("panstart",{detail:{x:e,y:n,target:r}})),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",l)}function s(o){if(o.preventDefault(),o.touches.length>1)return;const i=o.touches[0],r=i.clientX-e,a=i.clientY-n;e=i.clientX,n=i.clientY,t.dispatchEvent(new CustomEvent("panmove",{detail:{x:e,y:n,dx:r,dy:a}}))}function l(o){const i=o.changedTouches[0];e=i.clientX,n=i.clientY,t.dispatchEvent(new CustomEvent("panend",{detail:{x:e,y:n}})),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",l)}return t.addEventListener("mousedown",o),t.addEventListener("touchstart",a),{destroy(){t.removeEventListener("mousedown",o),t.removeEventListener("touchstart",a)}}}const kt=[{name:"pdfjsLib",src:"https://unpkg.com/pdfjs-dist@2.3.200/build/pdf.min.js"},{name:"PDFLib",src:"https://unpkg.com/pdf-lib@1.4.0/dist/pdf-lib.min.js"},{name:"download",src:"https://unpkg.com/downloadjs@1.4.7"},{name:"makeTextPDF",src:"/makeTextPDF.js"}],Ht={};function zt(t){if(Ht[t])return Ht[t];const e=kt.find(e=>e.name===t);if(!e)throw new Error(`Script ${t} not exists.`);return Mt(e)}function Mt({name:t,src:e}){return Ht[t]||(Ht[t]=new Promise((n,o)=>{const i=document.createElement("script");i.src=e,i.onload=()=>{n(window[t]),console.log(t+" is loaded.")},i.onerror=()=>{o(`The script ${t} didn't load correctly.`),alert("Some scripts did not load correctly. Please reload and try again.")},document.body.appendChild(i)})),Ht[t]}const Ct={Courier:{correction:(t,e)=>(t*e-t)/2+t/6},Helvetica:{correction:(t,e)=>(t*e-t)/2+t/10},"Times-Roman":{correction:(t,e)=>(t*e-t)/2+t/7}},St={...Ct,CK:{src:"/CK.ttf",correction:(t,e)=>(t*e-t)/2}};function Ft(t){if(Ct[t])return Ct[t];const e=St[t];if(!e)throw new Error(`Font '${t}' not exists.`);return Ct[t]=fetch(e.src).then(t=>t.arrayBuffer()).then(n=>{const o=new FontFace(t,n);return o.display="swap",o.load().then(()=>document.fonts.add(o)),{...e,buffer:n}}),Ct[t]}function jt(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=n,o.readAsArrayBuffer(t)})}function Pt(e){let n,o,r,a,s,l,c,u;return{c(){n=x("div"),o=x("div"),o.innerHTML='<div data-direction="left" class="resize-border h-full w-1 left-0 top-0 border-l cursor-ew-resize svelte-y5b9ho"></div> \n    <div data-direction="top" class="resize-border w-full h-1 left-0 top-0 border-t cursor-ns-resize svelte-y5b9ho"></div> \n    <div data-direction="bottom" class="resize-border w-full h-1 left-0 bottom-0 border-b cursor-ns-resize svelte-y5b9ho"></div> \n    <div data-direction="right" class="resize-border h-full w-1 right-0 top-0 border-r cursor-ew-resize svelte-y5b9ho"></div> \n    <div data-direction="left-top" class="resize-corner left-0 top-0 cursor-nwse-resize transform\n      -translate-x-1/2 -translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="right-top" class="resize-corner right-0 top-0 cursor-nesw-resize transform\n      translate-x-1/2 -translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="left-bottom" class="resize-corner left-0 bottom-0 cursor-nesw-resize transform\n      -translate-x-1/2 translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="right-bottom" class="resize-corner right-0 bottom-0 cursor-nwse-resize transform\n      translate-x-1/2 translate-y-1/2 md:scale-25 svelte-y5b9ho"></div>',a=E(),s=x("div"),s.innerHTML='<img class="w-full h-full" src="/delete.svg" alt="delete object">',l=E(),c=x("canvas"),H(o,"class","absolute w-full h-full cursor-grab svelte-y5b9ho"),F(o,"cursor-grabbing","move"===e[5]),F(o,"operation",e[5]),H(s,"class","absolute left-0 top-0 right-0 w-12 h-12 m-auto rounded-full bg-white\n    cursor-pointer transform -translate-y-1/2 md:scale-25"),H(c,"class","w-full h-full"),H(n,"class","absolute left-0 top-0 select-none"),C(n,"width",e[0]+e[8]+"px"),C(n,"height",e[1]+e[9]+"px"),C(n,"transform","translate("+(e[2]+e[6])+"px,\n  "+(e[3]+e[7])+"px)")},m(t,f,h){y(t,n,f),w(n,o),w(n,a),w(n,s),w(n,l),w(n,c),e[22](c),h&&i(u),u=[d(r=_t.call(null,o)),_(o,"panstart",e[12]),_(o,"panmove",e[10]),_(o,"panend",e[11]),_(s,"click",e[13])]},p(t,[e]){32&e&&F(o,"cursor-grabbing","move"===t[5]),32&e&&F(o,"operation",t[5]),257&e&&C(n,"width",t[0]+t[8]+"px"),514&e&&C(n,"height",t[1]+t[9]+"px"),204&e&&C(n,"transform","translate("+(t[2]+t[6])+"px,\n  "+(t[3]+t[7])+"px)")},i:t,o:t,d(t){t&&v(n),e[22](null),i(u)}}}function Tt(t,e,n){let{payload:o}=e,{file:i}=e,{width:r}=e,{height:a}=e,{x:s}=e,{y:l}=e,{pageScale:c=1}=e;const u=O();let d,f,h,p="",g=[],m=0,w=0,y=0,v=0;async function x(){n(4,h.width=r,h),n(4,h.height=a,h),h.getContext("2d").drawImage(o,0,0);let t=1;r>500&&(t=500/r),a>500&&(t=Math.min(t,500/a)),u("update",{width:r*t,height:a*t}),["image/jpeg","image/png"].includes(i.type)||h.toBlob(t=>{u("update",{file:t})})}return W(x),t.$set=t=>{"payload"in t&&n(14,o=t.payload),"file"in t&&n(15,i=t.file),"width"in t&&n(0,r=t.width),"height"in t&&n(1,a=t.height),"x"in t&&n(2,s=t.x),"y"in t&&n(3,l=t.y),"pageScale"in t&&n(16,c=t.pageScale)},[r,a,s,l,h,p,m,w,y,v,function(t){const e=(t.detail.x-d)/c,o=(t.detail.y-f)/c;"move"===p?(n(6,m=e),n(7,w=o)):"scale"===p&&(g.includes("left")&&(n(6,m=e),n(8,y=-e)),g.includes("top")&&(n(7,w=o),n(9,v=-o)),g.includes("right")&&n(8,y=e),g.includes("bottom")&&n(9,v=o))},function(t){"move"===p?(u("update",{x:s+m,y:l+w}),n(6,m=0),n(7,w=0)):"scale"===p&&(u("update",{x:s+m,y:l+w,width:r+y,height:a+v}),n(6,m=0),n(7,w=0),n(8,y=0),n(9,v=0),g=[]),n(5,p="")},function(t){if(d=t.detail.x,f=t.detail.y,t.detail.target===t.currentTarget)return n(5,p="move");n(5,p="scale"),g=t.detail.target.dataset.direction.split("-")},function(){u("delete")},o,i,c,d,f,g,u,x,function(t){X[t?"unshift":"push"](()=>{n(4,h=t)})}]}class Dt extends yt{constructor(t){super(),wt(this,t,Tt,Pt,s,{payload:14,file:15,width:0,height:1,x:2,y:3,pageScale:16})}}function Rt(t){let e,n;const o=t[2].default,i=l(o,t,t[1],null);return{c(){e=x("div"),i&&i.c()},m(o,r){y(o,e,r),i&&i.m(e,null),t[3](e),n=!0},p(t,[e]){i&&i.p&&2&e&&i.p(c(o,t,t[1],null),u(o,t[1],e,null))},i(t){n||(st(i,t),n=!0)},o(t){lt(i,t),n=!1},d(n){n&&v(e),i&&i.d(n),t[3](null)}}}function At(t,e,n){let o,{$$slots:i={},$$scope:r}=e;return t.$set=t=>{"$$scope"in t&&n(1,r=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&o&&document.body.appendChild(o)},[o,r,i,function(t){X[t?"unshift":"push"](()=>{n(0,o=t)})}]}class Nt extends yt{constructor(t){super(),wt(this,t,At,Rt,a,{})}}function Bt(t){let e,n;const o=t[0].default,i=l(o,t,t[1],null);return{c(){e=x("div"),i&&i.c(),H(e,"class","fixed z-10 top-0 left-0 right-0 h-12")},m(t,o){y(t,e,o),i&&i.m(e,null),n=!0},p(t,e){i&&i.p&&2&e&&i.p(c(o,t,t[1],null),u(o,t[1],e,null))},i(t){n||(st(i,t),n=!0)},o(t){lt(i,t),n=!1},d(t){t&&v(e),i&&i.d(t)}}}function Wt(t){let e;const n=new Nt({props:{$$slots:{default:[Bt]},$$scope:{ctx:t}}});return{c(){ht(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(t,[e]){const o={};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){gt(n,t)}}}function Ot(t,e,n){let{$$slots:o={},$$scope:i}=e;return t.$set=t=>{"$$scope"in t&&n(1,i=t.$$scope)},[o,i]}class Gt extends yt{constructor(t){super(),wt(this,t,Ot,Wt,a,{})}}function Ut(t){function e(e){Array.from(e.touches).some(e=>t.contains(e.target))||t.dispatchEvent(new CustomEvent("tapout"))}function n(e){t.contains(e.target)||t.dispatchEvent(new CustomEvent("tapout"))}return window.addEventListener("touchstart",e),window.addEventListener("mousedown",n),{destroy(){window.removeEventListener("touchstart",e),window.removeEventListener("mousedown",n)}}}const Xt=()=>{};function Yt(t,e,n){const o=t.slice();return o[36]=e[n],o}function qt(t){let e;const n=new Gt({props:{$$slots:{default:[Jt]},$$scope:{ctx:t}}});return{c(){ht(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(t,e){const o={};56&e[0]|256&e[1]&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){gt(n,t)}}}function It(e){let n,o,i,r=e[36]+"";return{c(){n=x("option"),o=$(r),n.__value=i=e[36],n.value=n.__value},m(t,e){y(t,n,e),w(n,o)},p:t,d(t){t&&v(n)}}}function Jt(t){let e,n,o,r,a,s,l,c,u,f,h,p,g,m,b,$,L,k,C,F,j,P,T,D,R,A=t[9],N=[];for(let e=0;e<A.length;e+=1)N[e]=It(Yt(t,A,e));return{c(){e=x("div"),n=x("div"),o=x("img"),a=E(),s=x("input"),l=E(),c=x("div"),u=x("img"),h=E(),p=x("input"),g=E(),m=x("div"),b=x("img"),L=E(),k=x("div"),C=x("select");for(let t=0;t<N.length;t+=1)N[t].c();F=E(),j=x("div"),j.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757\n                6.586 4.343 8z"></path></svg>',P=E(),T=x("div"),T.innerHTML='<img class="w-full h-full" src="/delete.svg" alt="delete object">',o.src!==(r="/line_height.svg")&&H(o,"src","/line_height.svg"),H(o,"class","w-6 mr-2"),H(o,"alt","Line height"),H(s,"type","number"),H(s,"min","1"),H(s,"max","10"),H(s,"step","0.1"),H(s,"class","h-6 w-12 text-center flex-shrink-0 rounded-sm"),H(n,"class","mr-2 flex items-center"),u.src!==(f="/text.svg")&&H(u,"src","/text.svg"),H(u,"class","w-6 mr-2"),H(u,"alt","Font size"),H(p,"type","number"),H(p,"min","12"),H(p,"max","120"),H(p,"step","1"),H(p,"class","h-6 w-12 text-center flex-shrink-0 rounded-sm"),H(c,"class","mr-2 flex items-center"),b.src!==($="/text-family.svg")&&H(b,"src","/text-family.svg"),H(b,"class","w-4 mr-2"),H(b,"alt","Font family"),H(C,"class","font-family svelte-dfawvu"),void 0===t[5]&&K(()=>t[34].call(C)),H(j,"class","pointer-events-none absolute inset-y-0 right-0 flex\n            items-center px-2 text-gray-700"),H(k,"class","relative w-32 md:w-40"),H(m,"class","mr-2 flex items-center"),H(T,"class","w-5 h-5 rounded-full bg-white cursor-pointer"),H(e,"class","h-full flex justify-center items-center bg-gray-300 border-b\n      border-gray-400")},m(r,f,v){y(r,e,f),w(e,n),w(n,o),w(n,a),w(n,s),M(s,t[4]),w(e,l),w(e,c),w(c,u),w(c,h),w(c,p),M(p,t[3]),w(e,g),w(e,m),w(m,b),w(m,L),w(m,k),w(k,C);for(let t=0;t<N.length;t+=1)N[t].m(C,null);S(C,t[5]),w(k,F),w(k,j),w(e,P),w(e,T),v&&i(R),R=[_(s,"input",t[32]),_(p,"input",t[33]),_(C,"change",t[34]),_(C,"change",t[19]),_(T,"click",t[20]),d(D=Ut.call(null,e)),_(e,"tapout",t[18]),_(e,"mousedown",t[17]),_(e,"touchstart",t[17],{passive:!0})]},p(t,e){if(16&e[0]&&z(s.value)!==t[4]&&M(s,t[4]),8&e[0]&&z(p.value)!==t[3]&&M(p,t[3]),512&e[0]){let n;for(A=t[9],n=0;n<A.length;n+=1){const o=Yt(t,A,n);N[n]?N[n].p(o,e):(N[n]=It(o),N[n].c(),N[n].m(C,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=A.length}32&e[0]&&S(C,t[5])},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(N,t),i(R)}}}function Kt(t){let e,n,o,r,a,s,l,c,u,f=t[8]&&qt(t);return{c(){f&&f.c(),e=E(),n=x("div"),o=x("div"),a=E(),s=x("div"),H(o,"class","absolute w-full h-full cursor-grab border border-dotted\n    border-gray-500 svelte-dfawvu"),F(o,"cursor-grab",!t[8]),F(o,"cursor-grabbing","move"===t[8]),F(o,"editing",["edit","tool"].includes(t[8])),H(s,"contenteditable","true"),H(s,"spellcheck","false"),H(s,"class","outline-none whitespace-no-wrap"),C(s,"font-size",t[3]+"px"),C(s,"font-family","'"+t[5]+"', serif"),C(s,"line-height",t[4]),C(s,"-webkit-user-select","text"),H(n,"class","absolute left-0 top-0 select-none"),C(n,"transform","translate("+(t[0]+t[6])+"px, "+(t[1]+t[7])+"px)")},m(h,p,g){f&&f.m(h,p),y(h,e,p),y(h,n,p),w(n,o),w(n,a),w(n,s),t[35](s),c=!0,g&&i(u),u=[d(r=_t.call(null,o)),_(o,"panstart",t[12]),_(o,"panmove",t[10]),_(o,"panend",t[11]),_(s,"focus",t[13]),_(s,"keydown",t[16]),_(s,"paste",k(t[15])),d(l=Ut.call(null,n)),_(n,"tapout",t[14])]},p(t,i){t[8]?f?(f.p(t,i),256&i[0]&&st(f,1)):(f=qt(t),f.c(),st(f,1),f.m(e.parentNode,e)):f&&(rt(),lt(f,1,1,()=>{f=null}),at()),256&i[0]&&F(o,"cursor-grab",!t[8]),256&i[0]&&F(o,"cursor-grabbing","move"===t[8]),256&i[0]&&F(o,"editing",["edit","tool"].includes(t[8])),(!c||8&i[0])&&C(s,"font-size",t[3]+"px"),(!c||32&i[0])&&C(s,"font-family","'"+t[5]+"', serif"),(!c||16&i[0])&&C(s,"line-height",t[4]),(!c||195&i[0])&&C(n,"transform","translate("+(t[0]+t[6])+"px, "+(t[1]+t[7])+"px)")},i(t){c||(st(f),c=!0)},o(t){lt(f),c=!1},d(o){f&&f.d(o),o&&v(e),o&&v(n),t[35](null),i(u)}}}function Vt(t,e,n){let{size:o}=e,{text:i}=e,{lineHeight:r}=e,{x:a}=e,{y:s}=e,{fontFamily:l}=e,{pageScale:c=1}=e;const u=Object.keys(St),d=O();let f,h,p,g=o,m=r,w=l,y=0,v=0,x="";function b(){let t;for(;t=Array.from(p.childNodes).find(t=>!["#text","BR"].includes(t.nodeName));)p.removeChild(t)}function $(){n(2,p.innerHTML=i,p),p.focus()}function E(){const t=p.childNodes,e=[];let n="";for(let o=0;o<t.length;o++){const i=t[o];"BR"===i.nodeName?(e.push(n),n=""):n+=i.textContent}return e.push(n),e}return W($),t.$set=t=>{"size"in t&&n(21,o=t.size),"text"in t&&n(22,i=t.text),"lineHeight"in t&&n(23,r=t.lineHeight),"x"in t&&n(0,a=t.x),"y"in t&&n(1,s=t.y),"fontFamily"in t&&n(24,l=t.fontFamily),"pageScale"in t&&n(25,c=t.pageScale)},[a,s,p,g,m,w,y,v,x,u,function(t){n(6,y=(t.detail.x-f)/c),n(7,v=(t.detail.y-h)/c)},function(t){if(0===y&&0===v)return p.focus();d("update",{x:a+y,y:s+v}),n(6,y=0),n(7,v=0),n(8,x="")},function(t){f=t.detail.x,h=t.detail.y,n(8,x="move")},function(){n(8,x="edit")},async function(){"edit"===x&&"tool"!==x&&(p.blur(),b(),d("update",{lines:E(),width:p.clientWidth}),n(8,x=""))},async function(t){const e=t.clipboardData.getData("text");var n;document.execCommand("insertHTML",!1,e),await new Promise(t=>setTimeout(t,n)),b()},function(t){const e=Array.from(p.childNodes);if(13===t.keyCode){t.preventDefault();const n=window.getSelection(),o=n.focusNode,i=n.focusOffset;if(o===p)p.insertBefore(document.createElement("br"),e[i]);else if(o instanceof HTMLBRElement)p.insertBefore(document.createElement("br"),o);else if(o.textContent.length!==i)document.execCommand("insertHTML",!1,"<br>");else{let t=o.nextSibling;t?p.insertBefore(document.createElement("br"),t):(t=p.appendChild(document.createElement("br")),t=p.appendChild(document.createElement("br"))),n.collapse(t,0)}}},function(){n(8,x="tool")},async function(){"tool"===x&&"edit"!==x&&(d("update",{lines:E(),lineHeight:m,size:g,fontFamily:w}),n(8,x=""))},function(){d("selectFont",{name:w})},function(){d("delete")},o,i,r,l,c,f,h,d,b,$,E,function(){m=z(this.value),n(4,m)},function(){g=z(this.value),n(3,g)},function(){w=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(5,w),n(9,u)},function(t){X[t?"unshift":"push"](()=>{n(2,p=t)})}]}class Qt extends yt{constructor(t){super(),wt(this,t,Vt,Kt,s,{size:21,text:22,lineHeight:23,x:0,y:1,fontFamily:24,pageScale:25},[-1,-1])}}function Zt(e){let n,o,r,a,s,l,c,u,f;return{c(){n=x("div"),o=x("div"),o.innerHTML='<div data-direction="left-top" class="absolute left-0 top-0 w-10 h-10 bg-green-400 rounded-full\n      cursor-nwse-resize transform -translate-x-1/2 -translate-y-1/2 md:scale-25"></div> \n    <div data-direction="right-bottom" class="absolute right-0 bottom-0 w-10 h-10 bg-green-400 rounded-full\n      cursor-nwse-resize transform translate-x-1/2 translate-y-1/2 md:scale-25"></div>',a=E(),s=x("div"),s.innerHTML='<img class="w-full h-full" src="/delete.svg" alt="delete object">',l=E(),c=b("svg"),u=b("path"),H(o,"class","absolute w-full h-full cursor-grab border border-gray-400\n    border-dashed svelte-119320q"),F(o,"cursor-grabbing","move"===e[5]),F(o,"operation",e[5]),H(s,"class","absolute left-0 top-0 right-0 w-12 h-12 m-auto rounded-full bg-white\n    cursor-pointer transform -translate-y-1/2 md:scale-25"),H(u,"stroke-width","5"),H(u,"stroke-linejoin","round"),H(u,"stroke-linecap","round"),H(u,"stroke","black"),H(u,"fill","none"),H(u,"d",e[3]),H(c,"width","100%"),H(c,"height","100%"),H(n,"class","absolute left-0 top-0 select-none"),C(n,"width",e[0]+e[8]+"px"),C(n,"height",(e[0]+e[8])/e[9]+"px"),C(n,"transform","translate("+(e[1]+e[6])+"px, "+(e[2]+e[7])+"px)")},m(t,h,p){y(t,n,h),w(n,o),w(n,a),w(n,s),w(n,l),w(n,c),w(c,u),e[22](c),p&&i(f),f=[d(r=_t.call(null,o)),_(o,"panstart",e[12]),_(o,"panmove",e[10]),_(o,"panend",e[11]),_(s,"click",e[13])]},p(t,[e]){32&e&&F(o,"cursor-grabbing","move"===t[5]),32&e&&F(o,"operation",t[5]),8&e&&H(u,"d",t[3]),257&e&&C(n,"width",t[0]+t[8]+"px"),257&e&&C(n,"height",(t[0]+t[8])/t[9]+"px"),198&e&&C(n,"transform","translate("+(t[1]+t[6])+"px, "+(t[2]+t[7])+"px)")},i:t,o:t,d(t){t&&v(n),e[22](null),i(f)}}}function te(t,e,n){let{originWidth:o}=e,{originHeight:i}=e,{width:r}=e,{x:a}=e,{y:s}=e,{pageScale:l=1}=e,{path:c}=e;const u=O();let d,f,h,p="",g=0,m=0,w=0,y="";const v=o/i;async function x(){h.setAttribute("viewBox",`0 0 ${o} ${i}`)}return W(x),t.$set=t=>{"originWidth"in t&&n(14,o=t.originWidth),"originHeight"in t&&n(15,i=t.originHeight),"width"in t&&n(0,r=t.width),"x"in t&&n(1,a=t.x),"y"in t&&n(2,s=t.y),"pageScale"in t&&n(16,l=t.pageScale),"path"in t&&n(3,c=t.path)},[r,a,s,c,h,p,g,m,w,v,function(t){const e=(t.detail.x-d)/l,o=(t.detail.y-f)/l;if("move"===p)n(6,g=e),n(7,m=o);else if("scale"===p){if("left-top"===y){let t=1/0;t=Math.min(e,o*v),n(6,g=t),n(8,w=-t),n(7,m=t/v)}if("right-bottom"===y){let t=-1/0;t=Math.max(e,o*v),n(8,w=t)}}},function(t){"move"===p?(u("update",{x:a+g,y:s+m}),n(6,g=0),n(7,m=0)):"scale"===p&&(u("update",{x:a+g,y:s+m,width:r+w,scale:(r+w)/o}),n(6,g=0),n(7,m=0),n(8,w=0),y=""),n(5,p="")},function(t){if(d=t.detail.x,f=t.detail.y,t.detail.target===t.currentTarget)return n(5,p="move");n(5,p="scale"),y=t.detail.target.dataset.direction},function(){u("delete")},o,i,l,d,f,y,u,x,function(t){X[t?"unshift":"push"](()=>{n(4,h=t)})}]}class ee extends yt{constructor(t){super(),wt(this,t,te,Zt,s,{originWidth:14,originHeight:15,width:0,x:1,y:2,pageScale:16,path:3})}}function ne(e){let n,o,r,a,s,l,c,u,f,h;return{c(){n=x("div"),o=x("div"),r=x("button"),r.textContent="Cancel",a=E(),s=x("button"),s.textContent="Done",l=E(),c=b("svg"),u=b("path"),H(r,"class"," w-24 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4\n      rounded mr-4"),H(s,"class","w-24 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-4\n      rounded"),H(o,"class","absolute right-0 bottom-0 mr-4 mb-4 flex"),H(u,"stroke-width","5"),H(u,"stroke-linejoin","round"),H(u,"stroke-linecap","round"),H(u,"d",e[1]),H(u,"stroke","black"),H(u,"fill","none"),H(c,"class","w-full h-full pointer-events-none"),H(n,"class","relative w-full h-full select-none")},m(t,p,g){y(t,n,p),w(n,o),w(o,r),w(o,a),w(o,s),w(n,l),w(n,c),w(c,u),e[16](n),g&&i(h),h=[_(r,"click",e[6]),_(s,"click",e[5]),d(f=_t.call(null,n)),_(n,"panstart",e[2]),_(n,"panmove",e[3]),_(n,"panend",e[4])]},p(t,[e]){2&e&&H(u,"d",t[1])},i:t,o:t,d(t){t&&v(n),e[16](null),i(h)}}}function oe(t,e,n){const o=O();let i,r=0,a=0,s="",l=1/0,c=0,u=1/0,d=0,f=[],h=!1;return[i,s,function(t){if(t.detail.target!==i)return h=!1;h=!0,r=t.detail.x,a=t.detail.y,l=Math.min(l,r),c=Math.max(c,r),u=Math.min(u,a),d=Math.max(d,a),f.push(["M",r,a]),n(1,s+=`M${r},${a}`)},function(t){h&&(r=t.detail.x,a=t.detail.y,l=Math.min(l,r),c=Math.max(c,r),u=Math.min(u,a),d=Math.max(d,a),f.push(["L",r,a]),n(1,s+=`L${r},${a}`))},function(){h=!1},function(){if(!f.length)return;const t=-(l-10),e=-(u-10);o("finish",{originWidth:c-l+20,originHeight:d-u+20,path:f.reduce((n,o)=>n+o[0]+(o[1]+t)+","+(o[2]+e),"")})},function(){o("cancel")},r,a,l,c,u,d,h,o,f,function(t){X[t?"unshift":"push"](()=>{n(0,i=t)})}]}class ie extends yt{constructor(t){super(),wt(this,t,oe,ne,a,{})}}function re(t,e,n){const o=t.slice();return o[42]=e[n],o}function ae(t,e,n){const o=t.slice();return o[39]=e[n],o[41]=n,o}function se(e){let n,o,i;const r=new ie({});return r.$on("finish",e[27]),r.$on("cancel",e[28]),{c(){n=x("div"),ht(r.$$.fragment),H(n,"class","fixed z-10 top-0 left-0 right-0 border-b border-gray-300 bg-white\n      shadow-lg"),C(n,"height","50%")},m(t,e){y(t,n,e),pt(r,n,null),i=!0},p:t,i(t){i||(st(r.$$.fragment,t),K(()=>{o||(o=ut(n,xt,{y:-200,duration:500},!0)),o.run(1)}),i=!0)},o(t){lt(r.$$.fragment,t),o||(o=ut(n,xt,{y:-200,duration:500},!1)),o.run(0),i=!1},d(t){t&&v(n),gt(r),t&&o&&o.end()}}}function le(e){let n;return{c(){n=x("div"),n.innerHTML='<span class=" font-bold text-3xl text-gray-500">Arrastre algo aquí</span>',H(n,"class","w-full flex-grow flex justify-center items-center")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function ce(t){let e,n,o,i,r,a,s,l,c,u=[],d=new Map,f=t[2];const h=t=>t[39];for(let e=0;e<f.length;e+=1){let n=ae(t,f,e),o=h(n);d.set(o,u[e]=pe(o,n))}return{c(){e=x("div"),n=x("img"),i=E(),r=x("input"),a=E(),s=x("div");for(let t=0;t<u.length;t+=1)u[t].c();n.src!==(o="/edit.svg")&&H(n,"src","/edit.svg"),H(n,"class","mr-2"),H(n,"alt","un bolígrafo, editar el nombre del pdf"),H(r,"placeholder","Cambie el nombre de su PDF aquí"),H(r,"type","text"),H(r,"class","flex-grow bg-transparent"),H(e,"class","flex justify-center px-5 w-full md:hidden"),H(s,"class","w-full")},m(o,d,f){y(o,e,d),w(e,n),w(e,i),w(e,r),M(r,t[1]),y(o,a,d),y(o,s,d);for(let t=0;t<u.length;t+=1)u[t].m(s,null);l=!0,f&&c(),c=_(r,"input",t[29])},p(t,e){if(2&e[0]&&r.value!==t[1]&&M(r,t[1]),254012&e[0]){const n=t[2];rt(),u=ft(u,e,h,1,t,n,d,s,dt,pe,null,ae),at()}},i(t){if(!l){for(let t=0;t<f.length;t+=1)st(u[t]);l=!0}},o(t){for(let t=0;t<u.length;t+=1)lt(u[t]);l=!1},d(t){t&&v(e),t&&v(a),t&&v(s);for(let t=0;t<u.length;t+=1)u[t].d();c()}}}function ue(t){let e;const n=new ee({props:{path:t[42].path,x:t[42].x,y:t[42].y,width:t[42].width,originWidth:t[42].originWidth,originHeight:t[42].originHeight,pageScale:t[3][t[41]]}});return n.$on("update",(function(...e){return t[35](t[42],...e)})),n.$on("delete",(function(...e){return t[36](t[42],...e)})),{c(){ht(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.path=t[42].path),20&o[0]&&(i.x=t[42].x),20&o[0]&&(i.y=t[42].y),20&o[0]&&(i.width=t[42].width),20&o[0]&&(i.originWidth=t[42].originWidth),20&o[0]&&(i.originHeight=t[42].originHeight),12&o[0]&&(i.pageScale=t[3][t[41]]),n.$set(i)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){gt(n,t)}}}function de(t){let e;const n=new Qt({props:{text:t[42].text,x:t[42].x,y:t[42].y,size:t[42].size,lineHeight:t[42].lineHeight,fontFamily:t[42].fontFamily,pageScale:t[3][t[41]]}});return n.$on("update",(function(...e){return t[33](t[42],...e)})),n.$on("delete",(function(...e){return t[34](t[42],...e)})),n.$on("selectFont",t[13]),{c(){ht(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.text=t[42].text),20&o[0]&&(i.x=t[42].x),20&o[0]&&(i.y=t[42].y),20&o[0]&&(i.size=t[42].size),20&o[0]&&(i.lineHeight=t[42].lineHeight),20&o[0]&&(i.fontFamily=t[42].fontFamily),12&o[0]&&(i.pageScale=t[3][t[41]]),n.$set(i)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){gt(n,t)}}}function fe(t){let e;const n=new Dt({props:{file:t[42].file,payload:t[42].payload,x:t[42].x,y:t[42].y,width:t[42].width,height:t[42].height,pageScale:t[3][t[41]]}});return n.$on("update",(function(...e){return t[31](t[42],...e)})),n.$on("delete",(function(...e){return t[32](t[42],...e)})),{c(){ht(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.file=t[42].file),20&o[0]&&(i.payload=t[42].payload),20&o[0]&&(i.x=t[42].x),20&o[0]&&(i.y=t[42].y),20&o[0]&&(i.width=t[42].width),20&o[0]&&(i.height=t[42].height),12&o[0]&&(i.pageScale=t[3][t[41]]),n.$set(i)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){gt(n,t)}}}function he(t,e){let n,o,i,r,a;const s=[fe,de,ue],l=[];function c(t,e){return"image"===t[42].type?0:"text"===t[42].type?1:"drawing"===t[42].type?2:-1}return~(o=c(e))&&(i=l[o]=s[o](e)),{key:t,first:null,c(){n=L(),i&&i.c(),r=L(),this.first=n},m(t,e){y(t,n,e),~o&&l[o].m(t,e),y(t,r,e),a=!0},p(t,e){let n=o;o=c(t),o===n?~o&&l[o].p(t,e):(i&&(rt(),lt(l[n],1,1,()=>{l[n]=null}),at()),~o?(i=l[o],i||(i=l[o]=s[o](t),i.c()),st(i,1),i.m(r.parentNode,r)):i=null)},i(t){a||(st(i),a=!0)},o(t){lt(i),a=!1},d(t){t&&v(n),~o&&l[o].d(t),t&&v(r)}}}function pe(t,e){let n,o,r,a,s,l,c,u=[],d=new Map;const f=new Lt({props:{page:e[39]}});f.$on("measure",(function(...t){return e[30](e[41],...t)}));let h=e[4][e[41]];const p=t=>t[42].id;for(let t=0;t<h.length;t+=1){let n=re(e,h,t),o=p(n);d.set(o,u[t]=he(o,n))}function g(...t){return e[37](e[41],...t)}function m(...t){return e[38](e[41],...t)}return{key:t,first:null,c(){n=x("div"),o=x("div"),ht(f.$$.fragment),r=E(),a=x("div");for(let t=0;t<u.length;t+=1)u[t].c();s=E(),H(a,"class","absolute top-0 left-0 transform origin-top-left"),C(a,"transform","scale("+e[3][e[41]]+")"),C(a,"touch-action","none"),H(o,"class","relative shadow-lg"),F(o,"shadow-outline",e[41]===e[5]),H(n,"class","p-5 w-full flex flex-col items-center overflow-hidden"),this.first=n},m(t,e,d){y(t,n,e),w(n,o),pt(f,o,null),w(o,r),w(o,a);for(let t=0;t<u.length;t+=1)u[t].m(a,null);w(n,s),l=!0,d&&i(c),c=[_(n,"mousedown",g),_(n,"touchstart",m,{passive:!0})]},p(t,n){e=t;const i={};if(4&n[0]&&(i.page=e[39]),f.$set(i),106524&n[0]){const t=e[4][e[41]];rt(),u=ft(u,n,p,1,e,t,d,a,dt,he,null,re),at()}(!l||12&n[0])&&C(a,"transform","scale("+e[3][e[41]]+")"),36&n[0]&&F(o,"shadow-outline",e[41]===e[5])},i(t){if(!l){st(f.$$.fragment,t);for(let t=0;t<h.length;t+=1)st(u[t]);l=!0}},o(t){lt(f.$$.fragment,t);for(let t=0;t<u.length;t+=1)lt(u[t]);l=!1},d(t){t&&v(n),gt(f);for(let t=0;t<u.length;t+=1)u[t].d();i(c)}}}function ge(t){let e,n,o,r,a,s,l,c,u,d,f,h,p,g,m,b,L,z,C,S,j,P,T,D,R,A,N,B,W,O,G,U,X,Y,q=t[6]?"Guardando":"Guardar";const I=new bt({});let J=t[7]&&se(t);const K=[ce,le],V=[];function Q(t,e){return t[2].length?0:1}return W=Q(t),O=V[W]=K[W](t),{c(){ht(I.$$.fragment),e=E(),n=x("main"),o=x("div"),r=x("input"),a=E(),s=x("input"),l=E(),c=x("label"),c.textContent="Elija un PDF",u=E(),d=x("div"),f=x("label"),f.innerHTML='<img src="image.svg" alt="Un icono para agregar imágenes.">',h=E(),p=x("label"),p.innerHTML='<img src="notes.svg" alt="Un icono para agregar texto">',g=E(),m=x("label"),m.innerHTML='<img src="gesture.svg" alt="Un icono para agregar un dibujo">',b=E(),L=x("div"),z=x("img"),S=E(),j=x("input"),P=E(),T=x("button"),D=$(q),R=E(),A=x("a"),A.innerHTML='<img src="/GitHub-Mark-32px.png" alt="Un ícono de GitHub lleva a la página personal de GitHub">',N=E(),J&&J.c(),B=E(),O.c(),G=E(),U=x("footer"),U.innerHTML='<div class="text-center"><small class="copyright">Designed with ❤️ from a remote island</small><br><small class="copyright">2023 © Ernesto Serrano</small></div>',H(r,"type","file"),H(r,"name","pdf"),H(r,"id","pdf"),H(r,"class","hidden"),H(s,"type","file"),H(s,"id","image"),H(s,"name","image"),H(s,"class","hidden"),H(c,"class","whitespace-no-wrap bg-blue-500 hover:bg-blue-700 text-white\n      font-bold py-1 px-3 md:px-4 rounded mr-3 cursor-pointer md:mr-4"),H(c,"for","pdf"),H(f,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),H(f,"for","image"),F(f,"cursor-not-allowed",t[5]<0),F(f,"bg-gray-500",t[5]<0),H(p,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),H(p,"for","text"),F(p,"cursor-not-allowed",t[5]<0),F(p,"bg-gray-500",t[5]<0),H(m,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),F(m,"cursor-not-allowed",t[5]<0),F(m,"bg-gray-500",t[5]<0),H(d,"class","relative mr-3 flex h-8 bg-gray-400 rounded-sm overflow-hidden\n      md:mr-4"),z.src!==(C="/edit.svg")&&H(z,"src","/edit.svg"),H(z,"class","mr-2"),H(z,"alt","un bolígrafo, editar el nombre del pdf"),H(j,"placeholder","Renombra tu PDF aquí"),H(j,"type","text"),H(j,"class","flex-grow bg-transparent"),H(L,"class","justify-center mr-3 md:mr-4 w-full max-w-xs hidden md:flex"),H(T,"class","w-22 bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3\n      md:px-4 mr-3 md:mr-4 rounded"),F(T,"cursor-not-allowed",0===t[2].length||t[6]||!t[0]),F(T,"bg-blue-700",0===t[2].length||t[6]||!t[0]),H(A,"href","https://github.com/erseco/pdf-editor"),H(o,"class","fixed z-10 top-0 left-0 right-0 h-12 flex justify-center items-center\n    bg-gray-200 border-b border-gray-300"),H(n,"class","flex flex-col items-center py-16 bg-gray-100 min-h-screen"),H(U,"class","footer")},m(v,x,$){pt(I,v,x),y(v,e,x),y(v,n,x),w(n,o),w(o,r),w(o,a),w(o,s),w(o,l),w(o,c),w(o,u),w(o,d),w(d,f),w(d,h),w(d,p),w(d,g),w(d,m),w(o,b),w(o,L),w(L,z),w(L,S),w(L,j),M(j,t[1]),w(o,P),w(o,T),w(T,D),w(o,R),w(o,A),w(n,N),J&&J.m(n,null),w(n,B),V[W].m(n,null),y(v,G,x),y(v,U,x),X=!0,$&&i(Y),Y=[_(window,"dragenter",k(t[24])),_(window,"dragover",k(t[25])),_(window,"drop",k(t[8])),_(r,"change",t[8]),_(s,"change",t[9]),_(p,"click",t[10]),_(m,"click",t[11]),_(j,"input",t[26]),_(T,"click",t[18])]},p(t,e){32&e[0]&&F(f,"cursor-not-allowed",t[5]<0),32&e[0]&&F(f,"bg-gray-500",t[5]<0),32&e[0]&&F(p,"cursor-not-allowed",t[5]<0),32&e[0]&&F(p,"bg-gray-500",t[5]<0),32&e[0]&&F(m,"cursor-not-allowed",t[5]<0),32&e[0]&&F(m,"bg-gray-500",t[5]<0),2&e[0]&&j.value!==t[1]&&M(j,t[1]),(!X||64&e[0])&&q!==(q=t[6]?"Guardando":"Guardar")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(D,q),69&e[0]&&F(T,"cursor-not-allowed",0===t[2].length||t[6]||!t[0]),69&e[0]&&F(T,"bg-blue-700",0===t[2].length||t[6]||!t[0]),t[7]?J?(J.p(t,e),128&e[0]&&st(J,1)):(J=se(t),J.c(),st(J,1),J.m(n,B)):J&&(rt(),lt(J,1,1,()=>{J=null}),at());let o=W;W=Q(t),W===o?V[W].p(t,e):(rt(),lt(V[o],1,1,()=>{V[o]=null}),at(),O=V[W],O||(O=V[W]=K[W](t),O.c()),st(O,1),O.m(n,null))},i(t){X||(st(I.$$.fragment,t),st(J),st(O),X=!0)},o(t){lt(I.$$.fragment,t),lt(J),lt(O),X=!1},d(t){gt(I,t),t&&v(e),t&&v(n),J&&J.d(),V[W].d(),t&&v(G),t&&v(U),i(Y)}}}function me(t,e,n){const o=function(){let t=0;return function(){return t++}}();let i,r="",a=[],s=[],l=[],c="Times-Roman",u=-1,d=!1,f=!1;async function h(t){try{const e=await async function(t){const e=await zt("pdfjsLib"),n=new Blob([t]),o=window.URL.createObjectURL(n);return e.getDocument(o).promise}(t);n(1,r=t.name),n(0,i=t);const o=e.numPages;n(2,a=Array(o).fill().map((t,n)=>e.getPage(n+1))),n(4,l=a.map(()=>[])),n(3,s=Array(o).fill(1))}catch(t){throw console.log("No se pudo agregar el pdf."),t}}async function p(t){try{const i=await function(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=n,o.readAsDataURL(t)})}(t),r=await(e=i,new Promise((t,n)=>{const o=new Image;if(o.onload=()=>t(o),o.onerror=n,e instanceof Blob){const t=window.URL.createObjectURL(e);o.src=t}else o.src=e})),a=o(),{width:s,height:c}=r,d={id:a,type:"image",width:s,height:c,x:0,y:0,payload:r,file:t};n(4,l=l.map((t,e)=>e===u?[...t,d]:t))}catch(t){console.log("No se pudo agregar la imagen.",t)}var e}function g(t="Nuevo campo de texto"){const e=o();Ft(c);const i={id:e,text:t,type:"text",size:16,width:0,lineHeight:1.4,fontFamily:c,x:0,y:0};n(4,l=l.map((t,e)=>e===u?[...t,i]:t))}function m(t,e,i,r=1){const a={id:o(),path:i,type:"drawing",x:0,y:0,originWidth:t,originHeight:e,width:t*r,scale:r};n(4,l=l.map((t,e)=>e===u?[...t,a]:t))}function w(t){n(5,u=t)}function y(t,e){n(4,l=l.map((n,o)=>o==u?n.map(n=>n.id===t?{...n,...e}:n):n))}function v(t){n(4,l=l.map((e,n)=>n==u?e.filter(e=>e.id!==t):e))}function x(t,e){n(3,s[e]=t,s)}W(async()=>{try{const t=await fetch("/test.pdf"),e=await t.blob();await h(e),n(5,u=0),setTimeout(()=>{Ft(c),kt.forEach(Mt)},5e3)}catch(t){console.log(t)}});return[i,r,a,s,l,u,d,f,async function(t){const e=(t.target.files||t.dataTransfer&&t.dataTransfer.files)[0];if(e&&"application/pdf"===e.type){n(5,u=-1);try{await h(e),n(5,u=0)}catch(t){console.log(t)}}},async function(t){const e=t.target.files[0];e&&u>=0&&p(e),t.target.value=null},function(){u>=0&&g()},function(){u>=0&&n(7,f=!0)},m,function(t){const e=t.detail.name;Ft(e),c=e},w,y,v,x,async function(){if(i&&!d&&a.length){n(6,d=!0);try{await async function(t,e,n){const o=await zt("PDFLib"),i=await zt("download"),r=await zt("makeTextPDF");let a;try{a=await o.PDFDocument.load(await jt(t))}catch(t){throw console.log("Failed to load PDF."),t}const s=a.getPages().map(async(t,n)=>{const i=e[n],s=t.getHeight(),l=i.map(async e=>{if("image"===e.type){let n,{file:o,x:i,y:r,width:l,height:c}=e;try{return n="image/jpeg"===o.type?await a.embedJpg(await jt(o)):await a.embedPng(await jt(o)),()=>t.drawImage(n,{x:i,y:s-r-c,width:l,height:c})}catch(t){return console.log("Failed to embed image.",t),Xt}}else{if("text"===e.type){let{x:n,y:o,lines:i,lineHeight:l,size:c,fontFamily:u,width:d}=e;const f=c*l*i.length,h=await Ft(u),[p]=await a.embedPdf(await r({lines:i,fontSize:c,lineHeight:l,width:d,height:f,font:h.buffer||u,dy:h.correction(c,l)}));return()=>t.drawPage(p,{width:d,height:f,x:n,y:s-o-f})}if("drawing"===e.type){let{x:n,y:i,path:r,scale:a}=e;const{pushGraphicsState:l,setLineCap:c,popGraphicsState:u,setLineJoin:d,LineCapStyle:f,LineJoinStyle:h}=o;return()=>{t.pushOperators(l(),c(f.Round),d(h.Round)),t.drawSvgPath(r,{borderWidth:5,scale:a,x:n,y:s-i}),t.pushOperators(u())}}}});(await Promise.all(l)).forEach(t=>t())});await Promise.all(s);try{i(await a.save(),n,"application/pdf")}catch(t){throw console.log("Failed to save PDF."),t}}(i,l,r)}catch(t){console.log(t)}finally{n(6,d=!1)}}},c,o,h,p,g,function(e){G(t,e)},function(e){G(t,e)},function(){r=this.value,n(1,r)},t=>{const{originWidth:e,originHeight:o,path:i}=t.detail;let r=1;e>500&&(r=500/e),m(e,o,i,r),n(7,f=!1)},()=>n(7,f=!1),function(){r=this.value,n(1,r)},(t,e)=>x(e.detail.scale,t),(t,e)=>y(t.id,e.detail),t=>v(t.id),(t,e)=>y(t.id,e.detail),t=>v(t.id),(t,e)=>y(t.id,e.detail),t=>v(t.id),t=>w(t),t=>w(t)]}return zt("pdfjsLib"),new class extends yt{constructor(t){super(),wt(this,t,me,ge,a,{},[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
